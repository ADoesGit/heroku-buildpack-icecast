#!/bin/sh -e

AWESOME_VM_BINARY="http://download.opensuse.org/repositories/multimedia:/xiph/Debian_10/icecast2_2.4.4-1.debian.tar.gz"
AWESOME_VM_VENDOR="vendor/icecast"

# vendor awesome-vm
mkdir -p $1/$AWESOME_VM_VENDOR
curl -L $AWESOME_VM_BINARY -o - | tar -xz -C $1/$AWESOME_VM_VENDOR -f -

indent() {
  sed -u 's/^/       /'
}

echo "-----> Found an icecast.xml file"

if [ ! -s $1/config/icecast.xml ]; then
  echo "icecast.xml was empty"
  echo $config > $1/config/icecast.xml
  exit 0
else
  exit 0
fi
